<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git | Code Space</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Vue 驱动的静态网站生成工具">
    <meta name="referrer" content="no-referrer">
    <link rel="preload" href="/assets/css/0.styles.36fa6605.css" as="style"><link rel="preload" href="/assets/js/app.8631f5fd.js" as="script"><link rel="preload" href="/assets/js/2.c86acf02.js" as="script"><link rel="preload" href="/assets/js/18.2d1c856d.js" as="script"><link rel="preload" href="/assets/js/4.bb958fe5.js" as="script"><link rel="preload" href="/assets/js/5.f6b759bd.js" as="script"><link rel="prefetch" href="/assets/js/10.5229baac.js"><link rel="prefetch" href="/assets/js/100.761e5c60.js"><link rel="prefetch" href="/assets/js/101.88597a61.js"><link rel="prefetch" href="/assets/js/102.ca4e8955.js"><link rel="prefetch" href="/assets/js/103.bb0a8c5a.js"><link rel="prefetch" href="/assets/js/104.ada1ba2d.js"><link rel="prefetch" href="/assets/js/105.7dfa4fd4.js"><link rel="prefetch" href="/assets/js/106.21625ce2.js"><link rel="prefetch" href="/assets/js/107.baa3c52d.js"><link rel="prefetch" href="/assets/js/108.acf31723.js"><link rel="prefetch" href="/assets/js/109.005de5c3.js"><link rel="prefetch" href="/assets/js/11.87f6165d.js"><link rel="prefetch" href="/assets/js/110.3f7f9cc7.js"><link rel="prefetch" href="/assets/js/111.3b30a687.js"><link rel="prefetch" href="/assets/js/12.99aeb020.js"><link rel="prefetch" href="/assets/js/13.7da88f8e.js"><link rel="prefetch" href="/assets/js/14.40750b79.js"><link rel="prefetch" href="/assets/js/15.1e5ac8b5.js"><link rel="prefetch" href="/assets/js/16.67bb4a76.js"><link rel="prefetch" href="/assets/js/17.f1ab3e54.js"><link rel="prefetch" href="/assets/js/19.7dc0e882.js"><link rel="prefetch" href="/assets/js/20.7c353ad4.js"><link rel="prefetch" href="/assets/js/21.cbb46237.js"><link rel="prefetch" href="/assets/js/22.4afaef53.js"><link rel="prefetch" href="/assets/js/23.d393b247.js"><link rel="prefetch" href="/assets/js/24.891ad824.js"><link rel="prefetch" href="/assets/js/25.276ad00a.js"><link rel="prefetch" href="/assets/js/26.fa584264.js"><link rel="prefetch" href="/assets/js/27.e4b057d9.js"><link rel="prefetch" href="/assets/js/28.5bf8f032.js"><link rel="prefetch" href="/assets/js/29.8433e072.js"><link rel="prefetch" href="/assets/js/3.d1a9f3b5.js"><link rel="prefetch" href="/assets/js/30.56b3857d.js"><link rel="prefetch" href="/assets/js/31.922fa2bc.js"><link rel="prefetch" href="/assets/js/32.9b657a86.js"><link rel="prefetch" href="/assets/js/33.e137843b.js"><link rel="prefetch" href="/assets/js/34.381ea4a1.js"><link rel="prefetch" href="/assets/js/35.316bd7fc.js"><link rel="prefetch" href="/assets/js/36.2aed7c05.js"><link rel="prefetch" href="/assets/js/37.190fa64d.js"><link rel="prefetch" href="/assets/js/38.92bab415.js"><link rel="prefetch" href="/assets/js/39.4a06e53c.js"><link rel="prefetch" href="/assets/js/40.5659e6bb.js"><link rel="prefetch" href="/assets/js/41.775301c1.js"><link rel="prefetch" href="/assets/js/42.c51af82f.js"><link rel="prefetch" href="/assets/js/43.2778dbcd.js"><link rel="prefetch" href="/assets/js/44.a273f119.js"><link rel="prefetch" href="/assets/js/45.f4601694.js"><link rel="prefetch" href="/assets/js/46.e36189eb.js"><link rel="prefetch" href="/assets/js/47.3a0a0486.js"><link rel="prefetch" href="/assets/js/48.6b96ef1f.js"><link rel="prefetch" href="/assets/js/49.eb54d0f4.js"><link rel="prefetch" href="/assets/js/50.95d30cd5.js"><link rel="prefetch" href="/assets/js/51.da5e7118.js"><link rel="prefetch" href="/assets/js/52.d51f007b.js"><link rel="prefetch" href="/assets/js/53.137ad8ee.js"><link rel="prefetch" href="/assets/js/54.961d82ab.js"><link rel="prefetch" href="/assets/js/55.fe758151.js"><link rel="prefetch" href="/assets/js/56.7553fa06.js"><link rel="prefetch" href="/assets/js/57.d7308f47.js"><link rel="prefetch" href="/assets/js/58.c46cf789.js"><link rel="prefetch" href="/assets/js/59.fd3a2e49.js"><link rel="prefetch" href="/assets/js/6.ee9b384b.js"><link rel="prefetch" href="/assets/js/60.fae54c95.js"><link rel="prefetch" href="/assets/js/61.4cfb2829.js"><link rel="prefetch" href="/assets/js/62.723d8843.js"><link rel="prefetch" href="/assets/js/63.062e167f.js"><link rel="prefetch" href="/assets/js/64.fcb3d6c5.js"><link rel="prefetch" href="/assets/js/65.b5264e60.js"><link rel="prefetch" href="/assets/js/66.43391f99.js"><link rel="prefetch" href="/assets/js/67.932a3518.js"><link rel="prefetch" href="/assets/js/68.a302fe3f.js"><link rel="prefetch" href="/assets/js/69.ceee876f.js"><link rel="prefetch" href="/assets/js/7.6d73fafa.js"><link rel="prefetch" href="/assets/js/70.d009ecd0.js"><link rel="prefetch" href="/assets/js/71.538da589.js"><link rel="prefetch" href="/assets/js/72.ad5dd223.js"><link rel="prefetch" href="/assets/js/73.7986e349.js"><link rel="prefetch" href="/assets/js/74.b563364b.js"><link rel="prefetch" href="/assets/js/75.ad17eb0f.js"><link rel="prefetch" href="/assets/js/76.adf491bd.js"><link rel="prefetch" href="/assets/js/77.02b519d4.js"><link rel="prefetch" href="/assets/js/78.d9ee5db7.js"><link rel="prefetch" href="/assets/js/79.eb016ca9.js"><link rel="prefetch" href="/assets/js/8.50838108.js"><link rel="prefetch" href="/assets/js/80.880d1043.js"><link rel="prefetch" href="/assets/js/81.c9d131a4.js"><link rel="prefetch" href="/assets/js/82.d9e996f2.js"><link rel="prefetch" href="/assets/js/83.599db34f.js"><link rel="prefetch" href="/assets/js/84.a271f588.js"><link rel="prefetch" href="/assets/js/85.f8fa3971.js"><link rel="prefetch" href="/assets/js/86.0d953abe.js"><link rel="prefetch" href="/assets/js/87.90895a7f.js"><link rel="prefetch" href="/assets/js/88.a9dd87d0.js"><link rel="prefetch" href="/assets/js/89.f4d474dc.js"><link rel="prefetch" href="/assets/js/9.7d75daca.js"><link rel="prefetch" href="/assets/js/90.fa728a24.js"><link rel="prefetch" href="/assets/js/91.2dbea5bb.js"><link rel="prefetch" href="/assets/js/92.390d94b5.js"><link rel="prefetch" href="/assets/js/93.8b01f9af.js"><link rel="prefetch" href="/assets/js/94.e234569d.js"><link rel="prefetch" href="/assets/js/95.d2534dfd.js"><link rel="prefetch" href="/assets/js/96.01980625.js"><link rel="prefetch" href="/assets/js/97.36578994.js"><link rel="prefetch" href="/assets/js/98.e7151c30.js"><link rel="prefetch" href="/assets/js/99.48afd786.js">
    <link rel="stylesheet" href="/assets/css/0.styles.36fa6605.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Code Space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/js/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/vueCom/" class="nav-link">
  Vue组件精讲
</a></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/git/" class="nav-link router-link-active">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/miniProgram/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  SVG
</a></li></ul></div></div> <a href="https://github.com/iamzhaoqing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/js/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/vueCom/" class="nav-link">
  Vue组件精讲
</a></div><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/git/" class="nav-link router-link-active">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/miniProgram/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/svg/" class="nav-link">
  SVG
</a></li></ul></div></div> <a href="https://github.com/iamzhaoqing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Git</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/git/" class="sidebar-link">目录</a></li><li><a href="/git/configTwoGit.html" class="sidebar-link">配置两个git账户</a></li><li><a href="/git/git.html" class="active sidebar-link">Git</a></li><li><a href="/git/git_submodule.html" class="sidebar-link">Git模块</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git"><a href="#git" class="header-anchor">#</a> Git</h1> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>linux安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span>
</code></pre></div><p>mac安装：通过安装homebrew，然后通过homebrew安装Git。或者安装xcode，Xcode集成了Git。</p> <p>windows安装：从Git官网直接<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">下载安装程序<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，安装完成后，在开始菜单里找到“Git”-&gt;“Git Bash”。</p> <p>安装完成后需要设置：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> config --global user.name <span class="token string">&quot;Your Name&quot;</span>
$ <span class="token function">git</span> config --global user.email <span class="token string">&quot;email@example.com&quot;</span>
</code></pre></div><p>注意<code>git config</code>命令的<code>--global</code>参数，用了这个参数，表示你这台机器上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用户名和Email地址。</p> <h2 id="feature-branching"><a href="#feature-branching" class="header-anchor">#</a> Feature Branching</h2> <h3 id="提交"><a href="#提交" class="header-anchor">#</a> 提交</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> push <span class="token operator">&lt;</span>远程仓库名称<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地分支<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>远程分支<span class="token operator">&gt;</span>
$ <span class="token function">git</span> push origin branch
</code></pre></div><h3 id="拉取"><a href="#拉取" class="header-anchor">#</a> 拉取</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> pull <span class="token punctuation">[</span>--rebase<span class="token punctuation">]</span> <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>  <span class="token comment"># 多部操作合并</span>
</code></pre></div><p>如果<code>git pull</code>提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令<code>git branch --set-upstream branch-name origin/branch-name</code>。</p> <h3 id="提交-2"><a href="#提交-2" class="header-anchor">#</a> 提交</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> commit -m <span class="token string">'msg'</span> 
</code></pre></div><h3 id="修改错误提交"><a href="#修改错误提交" class="header-anchor">#</a> 修改错误提交</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> commit --amend
</code></pre></div><p>只修改提交信息：<code>git commit --amend -m 'massage'</code></p> <p>将一个新的改动添加进提交中：<code>git add .</code> + <code>git commit --amend --no-edit</code>，不改变 commit message</p> <p>修改提交的作者：<code>git commit --amend --author &quot;Author Name &lt;Author Email&gt;&quot;</code></p> <h3 id="bug分支"><a href="#bug分支" class="header-anchor">#</a> Bug分支</h3> <p>Git提供了一个<code>stash</code>功能，可以把当前工作现场“储藏”起来。如果有新文件，需要加 <code>-a</code>，或者先 <code>git add .</code> 再使用 <code>stash</code>。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> stash
</code></pre></div><p>先确定要在哪个分支上修复bug，假定需要在<code>master</code>分支上修复，就从<code>master</code>创建临时分支：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> checkout master
$ <span class="token function">git</span> checkout -b issue-101
</code></pre></div><p>解决后合并分支，再删除分支。回到刚才的工作现场，用<code>git status</code>查看，工作区是干净的。用<code>git stash list</code>命令查看。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> stash list
stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>: WIP on dev: <span class="token number">6224937</span> <span class="token function">add</span> merge
</code></pre></div><p>恢复<code>stash</code>有两个方法：</p> <p>一是用<code>git stash apply</code>恢复，但是恢复后，stash内容并不删除，你需要用<code>git stash drop</code>来删除；</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> stash apply
$ <span class="token function">git</span> stash drop
Dropped refs/stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>fe3b60470eb88919715b9ba6f36f6bd4d1847ffc<span class="token punctuation">)</span>
</code></pre></div><p>另一种方式是用<code>git stash pop</code>，恢复的同时把stash内容也删了：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> stash pop
</code></pre></div><p>你可以多次stash，恢复的时候，先用<code>git stash list</code>查看，然后恢复指定的stash，用命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> stash apply stash@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="分支"><a href="#分支" class="header-anchor">#</a> 分支</h2> <h3 id="查看分支"><a href="#查看分支" class="header-anchor">#</a> 查看分支</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> branch
$ <span class="token function">git</span> branch -a  <span class="token comment"># 查看本地和远程所有分支</span>
$ <span class="token function">git</span> fetch  <span class="token comment"># 远程有新的分支，git branch -a 也查看不到，需要先拉取</span>
</code></pre></div><h3 id="新建分支"><a href="#新建分支" class="header-anchor">#</a> 新建分支</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> branch new_feature  <span class="token comment"># 新建分支</span>
$ <span class="token function">git</span> checkout new_feature  <span class="token comment"># 切换分支</span>
$ <span class="token function">git</span> switch new_feature  <span class="token comment"># 切换分支</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> checkout -b new_feature  <span class="token comment"># 新建并切换分支</span>
$ <span class="token function">git</span> switch -c new_feature  <span class="token comment"># 新建并切换分支</span>
$ <span class="token function">git</span> checkout -b new_feature origin/master  <span class="token comment"># 从远程仓库 master 分支新建一个 new_feature 分支，再切换到新建的分支</span>
</code></pre></div><h3 id="删除分支"><a href="#删除分支" class="header-anchor">#</a> 删除分支</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> branch -d branch
$ <span class="token function">git</span> branch -D branch  <span class="token comment"># 强制删除分支</span>
$ <span class="token function">git</span> push origin -d branch  <span class="token comment"># 删除远程分支</span>
</code></pre></div><h3 id="找回分支"><a href="#找回分支" class="header-anchor">#</a> 找回分支</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reflog
<span class="token function">git</span> checkout c08de9a
<span class="token function">git</span> checkout -b branch_name
</code></pre></div><h3 id="合并分支"><a href="#合并分支" class="header-anchor">#</a> 合并分支</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> merge branch  <span class="token comment"># 将 branch 合并到当前分支</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 若有冲突 手动解决后</span>
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
$ <span class="token function">git</span> commit
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 查看冲突文件</span>
$ <span class="token function">git</span> status -sb
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 撤销合并</span>
$ <span class="token function">git</span> merge --abort  <span class="token comment"># 不解决冲突直接撤销</span>
$ <span class="token function">git</span> reset --hard  <span class="token comment"># 解决冲突后，回滚到合并前</span>
</code></pre></div><h2 id="查看"><a href="#查看" class="header-anchor">#</a> 查看</h2> <h3 id="查看提交"><a href="#查看提交" class="header-anchor">#</a> 查看提交</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>$ git log</td> <td>查看历史记录</td></tr> <tr><td>$ git log -p</td> <td>查看详细历史</td></tr> <tr><td>$ git log -stat</td> <td>查看简要统计</td></tr> <tr><td>$ git log --graph --pretty=oneline</td> <td>查看分支合并情况</td></tr> <tr><td>$ git show</td> <td>查看当前 commit</td></tr> <tr><td>$ git show &lt;commit 引用&gt;</td> <td>查看指定 commit</td></tr> <tr><td>$ git show &lt;commit 引用&gt; &lt;file name&gt;</td> <td>查看指定 commit 的指定文件</td></tr></tbody></table> <h3 id="比较差异"><a href="#比较差异" class="header-anchor">#</a> 比较差异</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>$ git diff</td> <td>比对工作目录和暂存区</td></tr> <tr><td>$ git diff --staged （--cached）</td> <td>比对暂存区和上一条提交</td></tr> <tr><td>$ git diff HEAD</td> <td>比对工作目录和上一次提交</td></tr> <tr><td>$ git diff &lt;commit&gt;</td> <td>比对工作目录和指定 commit</td></tr> <tr><td>$ git diff &lt;本地分支名&gt; &lt;远程主机名&gt;/&lt;远程分支名&gt;</td> <td>比对本地仓库与远程仓库</td></tr></tbody></table> <p>Git 提供了一个命令<code>git reflog</code>用来记录你的每一次命令，可以查看版本id。</p> <p>默认情况下修改文件名大小写，不会产生记录，可以使用:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> <span class="token function">mv</span> a.js A.js
$ <span class="token function">git</span> status
    renamed: a.js -<span class="token operator">&gt;</span> A.js
</code></pre></div><h2 id="撤销"><a href="#撤销" class="header-anchor">#</a> 撤销</h2> <table><thead><tr><th>命令</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td>$ git checkout . /  $ git checkout -- &lt;filename&gt;</td> <td style="text-align:left;">撤销改动</td></tr> <tr><td>$ git reset  /  $ git reset &lt;filename&gt;</td> <td style="text-align:left;">撤销 add</td></tr> <tr><td>$ git reset HEAD^</td> <td style="text-align:left;">撤销 commit</td></tr></tbody></table> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>$ git reset origin/&lt;branch_name&gt;</td> <td>直接覆盖本地提交和远程保持一致</td></tr></tbody></table> <p>如果新增加文件，没有被跟踪 (untracked)，使用 <code>git checkout .</code> 是不起作用的，可以使用 <code>git clean -n</code>，先查看要被删除的文件，再使用 <code>git clean -f</code> 删除 (-df文件夹)。</p> <p>如果需要撤销操作到 add 之前，且不保存修改：</p> <table><thead><tr><th>阶段</th> <th>操作</th></tr></thead> <tbody><tr><td>已修改，未暂存（<code>git add</code>之前)</td> <td><code>git checkout .</code> 或 <code>git reset --hard</code></td></tr> <tr><td>已暂存，未提交（<code>git add</code>之后）</td> <td><code>git reset</code>+<code>git checkout .</code> 或 <code>git reset --hard</code></td></tr> <tr><td>已提交，未推送（<code>git commit</code>之后)</td> <td><code>git reset --hard origin/master</code></td></tr> <tr><td>已推送（<code>git push</code>之后)</td> <td><code>git reset --hard HEAD^</code>+<code>git push -f</code></td></tr></tbody></table> <p><code>git reset</code> 的本质是移动 HEAD 以及它所指向的 branch ，可以移动到任意的 commit 上，默认的参数是</p> <ol><li><code>--hard</code>：重置位置的同时，清空工作目录的所有改动；</li> <li><code>--soft</code>：重置位置的同时，保留工作目录和暂存区的内容，并把重置 <code>HEAD</code> 的位置所导致的新的文件差异放进暂存区。</li> <li><code>--mixed</code>（默认）：重置位置的同时，保留工作目录的内容，并清空暂存区。</li></ol> <p>在Git中，用<code>HEAD</code>表示当前版本，也就是最新的提交，上一个版本就是<code>HEAD^</code>，上两个版本就是<code>HEAD^^</code>，往上100个版本写成<code>HEAD~100</code>。</p> <h2 id="远程仓库"><a href="#远程仓库" class="header-anchor">#</a> 远程仓库</h2> <h3 id="添加密钥"><a href="#添加密钥" class="header-anchor">#</a> 添加密钥</h3> <p>以<code>github</code>为远程仓库，由于本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，需要设置：</p> <ol><li>创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有<code>id_rsa</code>和<code>id_rsa.pub</code>这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key：</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>$ ssh-keygen -t rsa -C <span class="token string">&quot;a@163.com&quot;</span>
</code></pre></div><ol start="2"><li>登陆GitHub，打开“SSH Keys”页面，添加key：</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> ~/.ssh/id_rsa.pub
</code></pre></div><h3 id="添加远程仓库"><a href="#添加远程仓库" class="header-anchor">#</a> 添加远程仓库</h3> <p>先在github上创建一个仓库。再关联远程仓库</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> remote <span class="token function">add</span> origin git@github.com:user/test.git
</code></pre></div><p>把本地库的所有内容推送到远程库上：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> push -u origin master
</code></pre></div><p>实际上是把当前分支<code>master</code>推送到远程。由于远程库是空的，第一次推送<code>master</code>分支时，加上了<code>-u</code>参数，Git不但会把本地的<code>master</code>分支内容推送的远程新的<code>master</code>分支，还会把本地的<code>master</code>分支和远程的<code>master</code>分支关联起来，在以后的推送或者拉取时就可以简化命令。</p> <h3 id="设置远程仓库地址"><a href="#设置远程仓库地址" class="header-anchor">#</a> 设置远程仓库地址</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> remote set-url origin <span class="token punctuation">[</span>url<span class="token punctuation">]</span>
</code></pre></div><h2 id="冲突"><a href="#冲突" class="header-anchor">#</a> 冲突</h2> <p>手动解决 conflicts 后，再提交。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> pull --rebase origin branch
$ <span class="token function">git</span> <span class="token function">add</span> readme.txt 
$ <span class="token function">git</span> rebase --continue
$ <span class="token function">git</span> commit -m <span class="token string">&quot;conflict fixed&quot;</span>
</code></pre></div><h2 id="标签"><a href="#标签" class="header-anchor">#</a> 标签</h2> <h3 id="创建标签"><a href="#创建标签" class="header-anchor">#</a> 创建标签</h3> <p>切换到需要打标签的分支上：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> checkout master
</code></pre></div><p>然后，敲命令<code>git tag &lt;name&gt;</code>就可以打一个新标签：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> tag v1.0
</code></pre></div><p>查看所有标签：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> tag
v1.0
</code></pre></div><p>默认标签是打在最新提交的<code>commit</code>上的，打历史版本标签，先找到 commit id。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> log --pretty<span class="token operator">=</span>oneline --abbrev-commit
7825a50 merge with no-ff
<span class="token number">6224937</span> <span class="token function">add</span> merge
d17efd8 remove test.txt
<span class="token punctuation">..</span>.
</code></pre></div><p>要对<code>add merge</code>这次提交打标签，它对应的commit id是<code>6224937</code>。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> tag v0.9 <span class="token number">6224937</span>
</code></pre></div><p>查看标签信息：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> show v0.9
</code></pre></div><p>创建带有说明的标签，用<code>-a</code>指定标签名，<code>-m</code>指定说明文字：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> tag -a v0.1 -m <span class="token string">&quot;version 0.1 released&quot;</span> <span class="token number">3628164</span>
</code></pre></div><h3 id="操作标签"><a href="#操作标签" class="header-anchor">#</a> 操作标签</h3> <p>删除标签：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> tag -d v0.1
Deleted tag <span class="token string">'v0.1'</span> <span class="token punctuation">(</span>was e078af9<span class="token punctuation">)</span>
</code></pre></div><p>推送某个标签到远程：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> push origin v1.0
</code></pre></div><p>一次性推送全部尚未推送到远程的本地标签：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> push origin --tags
</code></pre></div><p>如果标签已经推送到远程，先从本地删除：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> tag -d v0.9
</code></pre></div><p>然后，从远程删除：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> push origin :refs/tags/v0.9
To git@github.com:chingchao/learngit.git
 - <span class="token punctuation">[</span>deleted<span class="token punctuation">]</span>         v0.9
</code></pre></div><h2 id="忽略文件"><a href="#忽略文件" class="header-anchor">#</a> 忽略文件</h2> <p>忽略已提交的文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">rm</span> --cached <span class="token punctuation">[</span>file<span class="token punctuation">]</span>
<span class="token function">git</span> <span class="token function">rm</span> -r --cached folder
<span class="token function">git</span> commit -m <span class="token string">'delete files'</span>
</code></pre></div><h2 id="异常处理"><a href="#异常处理" class="header-anchor">#</a> 异常处理</h2> <p><a href="https://stackoverflow.com/questions/24543372/unable-to-connect-to-git-remote-repository" target="_blank" rel="noopener noreferrer">Unable to connect to git remote repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://www.yiibai.com/git" target="_blank" rel="noopener noreferrer">易百教程-Git<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener noreferrer">廖雪峰Git教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com//iamzhaoqing/blog/edit/master/docs/git/git.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/23/2020, 1:46:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/git/configTwoGit.html" class="prev">
        配置两个git账户
      </a></span> <span class="next"><a href="/git/git_submodule.html">
        Git模块
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----><!----></div></div>
    <script src="/assets/js/app.8631f5fd.js" defer></script><script src="/assets/js/2.c86acf02.js" defer></script><script src="/assets/js/18.2d1c856d.js" defer></script><script src="/assets/js/4.bb958fe5.js" defer></script><script src="/assets/js/5.f6b759bd.js" defer></script>
  </body>
</html>
