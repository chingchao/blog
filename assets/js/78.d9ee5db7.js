(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{414:function(s,a,t){"use strict";t.r(a);var e=t(21),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[s._v("#")]),s._v(" WebPack")]),s._v(" "),t("h2",{attrs:{id:"安装webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装webpack"}},[s._v("#")]),s._v(" 安装webpack")]),s._v(" "),t("p",[t("code",[s._v("npm install -g webpack")]),s._v("全局安装"),t("br"),s._v(" "),t("code",[s._v("npm install --save-dev webpack")]),s._v("安装在项目中，package.json中devDependencies下。\n"),t("RouterLink",{attrs:{to:"/tools/npm--save-dev.html"}},[s._v("--save-dev --save区别")])],1),s._v(" "),t("h2",{attrs:{id:"在终端打包文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在终端打包文件"}},[s._v("#")]),s._v(" 在终端打包文件")]),s._v(" "),t("p",[t("code",[s._v("webpack {入口文件} {存放路径}")]),s._v(" 例如 "),t("code",[s._v("webpack app/main.js public/bundle.js")])]),s._v(" "),t("h2",{attrs:{id:"webpack-配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-配置文件"}},[s._v("#")]),s._v(" webpack 配置文件")]),s._v(" "),t("p",[s._v("在根目录创建 "),t("code",[s._v("webpack.config.js")]),s._v(" 文件，webpack配置模版如下：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports ={\n    entry:{},\n    output:{},\n    module:{},\n    plugins:[],\n    devServer:{}\n}\n")])])]),t("ul",[t("li",[s._v("entry：配置入口文件的地址，可以是单一入口，也可以是多入口；")]),s._v(" "),t("li",[s._v("output：配置出口文件的地址，支持多出口配置；")]),s._v(" "),t("li",[s._v("module：配置模块，主要解析CSS和图片转换压缩等功能；")]),s._v(" "),t("li",[s._v("plugins：配置插件；")]),s._v(" "),t("li",[s._v("devServer：配置开发服务功能；")])]),s._v(" "),t("h3",{attrs:{id:"entry-output配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#entry-output配置"}},[s._v("#")]),s._v(" entry output配置")]),s._v(" "),t("p",[s._v("如指定入口文件和打包后文件存放路径和文件名，配置如下：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n    entry: __dirname + '/app/main.js',  //入口文件\n    output: {\n        path: __dirname + '/public',    //打包后文件存放路径\n        filename: 'bundle.js'           //打包后文件名\n    }\n}\n")])])]),t("blockquote",[t("p",[t("code",[s._v("__dirname")]),s._v(" 是nodejs中的全局变量，指当前执行脚本所在的路径。")])]),s._v(" "),t("p",[s._v("输入命令 "),t("code",[s._v("webpack")]),s._v(" 即可引用配置选项。")]),s._v(" "),t("h3",{attrs:{id:"多入口，出口配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多入口，出口配置"}},[s._v("#")]),s._v(" 多入口，出口配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n    entry: {\t\t\t\t\t\t\t\t  //入口文件\n        entry1: __dirname + '/app/main.js', \n        entry2: __dirname + '/src/index.js',\n    },\n    output: {\n        path: __dirname + '/public',    //打包后文件存放路径\n        filename: '[name].js'           //打包后文件名\n    }\n}\n")])])]),t("blockquote",[t("p",[t("code",[s._v("[name].js")]),s._v("表示将入口文件打包成相同名字的出口文件，有几个入口文件就打包生成几个出口文件。即使可以存在多个"),t("code",[s._v("入口")]),s._v("起点，但只指定一个"),t("code",[s._v("输出")]),s._v("配置。")])]),s._v(" "),t("h3",{attrs:{id:"mode-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mode-模式"}},[s._v("#")]),s._v(" mode 模式")]),s._v(" "),t("p",[s._v("提供 "),t("code",[s._v("mode")]),s._v(" 配置选项，告知 webpack 使用相应模式的内置优化。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("会将 "),t("code",[s._v("process.env.NODE_ENV")]),s._v(" 的值设为 "),t("code",[s._v("production")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"devserver配置搭建本地服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#devserver配置搭建本地服务器"}},[s._v("#")]),s._v(" devServer配置搭建本地服务器")]),s._v(" "),t("p",[s._v("其实Webpack提供一个可选的本地开发服务器，这个本地服务器基于node.js构建，浏览器监听你的代码的修改，并自动刷新显示修改后的结果。不过它是一个单独的组件，在webpack中进行配置之前需要单独安装它作为项目依赖。")]),s._v(" "),t("p",[t("code",[s._v("npm install --save-dev webpack-dev-server")])]),s._v(" "),t("p",[s._v("在webpack.config.js中添加：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("devServer"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    contentBase"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./public'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//本地服务器加载的页面所在的目录")]),s._v("\n    inline"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//实时刷新")]),s._v("\n    historyApiFallback"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//不跳转，直接打开 index.html")]),s._v("\n    port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'8808'")]),s._v("                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//端口，默认8080")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])])]),t("p",[s._v("配置参数说明：")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("contentBase")]),s._v("： 默认webpack dev server是从项目的根目录提供服务，如果要从不同的目录提供服务，可以通过contentBase来配置。"),t("br"),s._v(" "),t("strong",[s._v("port")]),s._v("：默认webpack是用 8080端口起的，通过port可以配成其他的端口。"),t("br"),s._v(" "),t("strong",[s._v("historyApiFallback")]),s._v("：对于单页面程序，浏览器的brower histroy可以设置成html5 history api或者hash，而设置为html5 api的，如果刷新浏览器会出现404 not found，原因是它通过这个路径（比如： /activities/2/ques/2）来访问后台，所以会出现404，而把historyApiFallback设置为true那么所有的路径都执行index.html。")])]),s._v(" "),t("p",[s._v("在"),t("code",[s._v("package.json")]),s._v("中的"),t("code",[s._v("script")]),s._v("对象下添加"),t("code",[s._v("server")]),s._v("，用"),t("code",[s._v("npm run server")]),s._v("即可执行"),t("code",[s._v("webpack-dev-server --open")]),s._v("命令开启服务器。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"server"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-dev-server --open"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("blockquote",[t("p",[t("code",[s._v("webpack-dev-server --open")]),s._v("启动服务器后控制台只会显示"),t("code",[s._v("webpack: Compiled successfully")]),s._v("。"),t("br"),s._v(" "),t("code",[s._v("webpack-dev-server --progerss")]),s._v("用于显示build的进度。")])]),s._v(" "),t("p",[s._v("只有在通过 DevServer 去启动 Webpack 时配置文件里 "),t("code",[s._v("devServer")]),s._v(" 才会生效。")]),s._v(" "),t("h2",{attrs:{id:"使用-npm-引导执行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-npm-引导执行"}},[s._v("#")]),s._v(" 使用 npm 引导执行")]),s._v(" "),t("p",[s._v("在终端中输入 "),t("code",[s._v("webpack")]),s._v(" (未安装全局webpack情况下，需输入 "),t("code",[s._v("node_modules/.bin/webpak")]),s._v(")比较麻烦，"),t("code",[s._v("npm")]),s._v(" 可以引导任务执行，配置 "),t("code",[s._v("package.json")]),s._v(" 中的 "),t("code",[s._v("script")]),s._v(" 对象后，使用 "),t("code",[s._v("npm start")]),s._v(" 代替。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'start'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("blockquote",[t("ol",[t("li",[s._v("此处如果没安装全局 "),t("code",[s._v("webpack")]),s._v(" 也不用指定命令对应的位置，"),t("code",[s._v("npm")]),s._v(" 会按照一定的顺序查找，"),t("code",[s._v("node_modules/.bin")]),s._v(" 在寻找的列表中。")]),s._v(" "),t("li",[s._v("使用 "),t("code",[s._v("npm")]),s._v(" 引导执行，命令格式是 "),t("code",[s._v("npm run {script name}")]),s._v("，如 "),t("code",[s._v("npm run start")]),s._v(" "),t("code",[s._v("npm run biuld")]),s._v(", "),t("code",[s._v("start")]),s._v(" 是一个特殊的脚本名称, 可以直接输入 "),t("code",[s._v("npm start")]),s._v("。")])])]),s._v(" "),t("h2",{attrs:{id:"生成-source-map-方便调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成-source-map-方便调试"}},[s._v("#")]),s._v(" 生成 source map 方便调试")]),s._v(" "),t("p",[s._v("通过配置打包生成一个"),t("code",[s._v(".map")]),s._v("文件，使编译文件与源文件对应，方便调试代码。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    devtool"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eval-source-map'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    entry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("  __dirname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/app/main.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" __dirname "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/public"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bundle.js"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("blockquote",[t("p",[t("code",[s._v("devtool")]),s._v("有多个配置选项，还有"),t("code",[s._v("source-map")]),s._v(", "),t("code",[s._v("cheap-module-source-map")]),s._v(", "),t("code",[s._v("cheap-module-eval-source-map")]),s._v(", "),t("code",[s._v("cheap-module-eval-source-map")]),s._v("等。\n配置都是由"),t("code",[s._v("eval")]),s._v(", "),t("code",[s._v("cheap")]),s._v(", "),t("code",[s._v("module")]),s._v(", "),t("code",[s._v("source-map")]),s._v(", "),t("code",[s._v("inline")]),s._v("五个关键字组合，分别代表五种特性。")])]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("eval： 使用eval包裹模块代码")]),s._v(" "),t("li",[s._v("source-map： 产生"),t("code",[s._v(".map")]),s._v("文件")]),s._v(" "),t("li",[s._v("cheap： 不包含列信息也不包含loader的sourcemap")]),s._v(" "),t("li",[s._v("module： 包含loader的sourcemap")]),s._v(" "),t("li",[s._v("inline： 将"),t("code",[s._v(".map")]),s._v("作为DataURI嵌入，不单独生成.map文件")])]),s._v(" "),t("p",[s._v("如果包含cheap关键字，则产生的.map文件不包含列信息。也就是说当你在浏览器中点击该代码的位置时， 光标只定位到行数，不定位到具体字符位置。")]),s._v(" "),t("p",[s._v("包含loader的sourcemap，定位到的将是原始代码，而非经过编译后的代码位置。比如用babel编译js代码，定位到源代码更方便调试。")])]),s._v(" "),t("h2",{attrs:{id:"loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[s._v("#")]),s._v(" Loader")]),s._v(" "),t("p",[s._v("loader使webpack具有调用外部脚本和工具的能力，实现对文件的处理。loader需要单独安装，在"),t("code",[s._v("webpack.config.js")]),s._v("文件中"),t("code",[s._v("modules")]),s._v("下配置后使用。配置参数：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("test")]),s._v("：匹配loaders所处理文件的拓展名的正则表达式（必须）")]),s._v(" "),t("li",[t("code",[s._v("loader")]),s._v("：loader的名称（必须）")]),s._v(" "),t("li",[t("code",[s._v("include/exclude")]),s._v("：手动添加必须处理的文件/文件夹，或屏蔽不需要处理的文件/文件夹 (可选）")]),s._v(" "),t("li",[t("code",[s._v("query")]),s._v("：为loaders提供额外的设置选项（可选）")])]),s._v(" "),t("h3",{attrs:{id:"配置loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置loader"}},[s._v("#")]),s._v(" 配置loader")]),s._v(" "),t("p",[s._v("有三种配值方式：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.less$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.less$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/\\.less$/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"include-exclude-onparse-enforce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#include-exclude-onparse-enforce"}},[s._v("#")]),s._v(" include exclude onParse enforce")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      cacheDirectory"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// enforce:'post' 的含义是把该 Loader 的执行顺序放到最后")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// enforce 的值还可以是 pre，代表把 Loader 的执行顺序放到最前面")]),s._v("\n    enforce"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'post'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[t("code",[s._v("noParse")]),s._v(" 配置项可以让 Webpack 忽略对部分没采用模块化的文件的递归解析和处理。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用正则表达式")]),s._v("\nnoParse"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[s._v("/jquery|chartjs/")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用函数，从 Webpack 3.0.0 开始支持")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("noParse")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// content 代表一个模块的文件路径")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 返回 true or false")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jquery"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("chartjs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"babel使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel使用"}},[s._v("#")]),s._v(" Babel使用")]),s._v(" "),t("p",[s._v("Babel可以将新版本的 js(es6)，和js拓展语言(jsx)等编译成浏览器支持的js代码。它是几个模块化的包，核心功能位于"),t("code",[s._v("babel-core")]),s._v("的npm包中，要使用某个功能，需单独安装相应的包。")]),s._v(" "),t("p",[s._v("先通过npm安装相应的包：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install --save-dev babel-core babel-loader babel-preset-env babel-preset-react\n")])])]),t("ul",[t("li",[t("code",[s._v("bable-core")]),s._v("：babel的核心包")]),s._v(" "),t("li",[t("code",[s._v("bable-loader")]),s._v("：babel的loader包")]),s._v(" "),t("li",[t("code",[s._v("babel-env-preset")]),s._v("：解析es6的包")]),s._v(" "),t("li",[t("code",[s._v("babel-preset-react")]),s._v("：解析jsx的包")])]),s._v(" "),t("p",[s._v("babel配置如下：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("modules: {\n    rules: [\n        {\n            test: /(\\.js|\\.jsx)$/,\n            use: {\n                loader: 'babel-loader',\n                options: {\n                    presets: [\n                        \"env\", \"react\"\n                    ]\n                }\n            },\n            exclude: 'node_modules/'\n        }\n    ]\n}\n")])])]),t("p",[s._v("可以将babel的配置单独写入"),t("code",[s._v(".babelrc")]),s._v("中，减少"),t("code",[s._v("webpack.config.js")]),s._v("文件的内容，webpack会自动调用。修改后如下：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('/* webpack.config.js */\n\nmodule: {\n    rules: [\n        {\n            test: /(\\.jsx|\\.js)$/,\n            use: {\n                loader: "babel-loader"\n            },\n            exclude: /node_modules/\n        }\n    ]\n}\n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("/* .babelrc */\n\n{\n    parents: ['env', 'react']\n}\n")])])]),t("h2",{attrs:{id:"resolve"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resolve"}},[s._v("#")]),s._v(" Resolve")]),s._v(" "),t("p",[s._v("Resolve 配置 Webpack 如何寻找模块所对应的文件，可以根据自己的需要修改默认的规则。")]),s._v(" "),t("h3",{attrs:{id:"alias"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alias"}},[s._v("#")]),s._v(" alias")]),s._v(" "),t("p",[t("code",[s._v("resolve.alias")]),s._v(" 配置项通过别名来把原导入路径映射成一个新的导入路径。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Webpack alias 配置")]),s._v("\nresolve"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  alias"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    components"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/components/'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("通过 "),t("code",[s._v("import Button from 'components/button'")]),s._v(" 导入。将所有路径中有 "),t("code",[s._v("components")]),s._v(" 的都替换掉。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("resolve"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  alias"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react$'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/path/to/react.min.js'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("支持 "),t("code",[s._v("$")]),s._v(" 符号来缩小范围到只命中以关键字结尾的导入语句，只会命中以 "),t("code",[s._v("react")]),s._v(" 结尾的导入语句。")]),s._v(" "),t("h3",{attrs:{id:"extensions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#extensions"}},[s._v("#")]),s._v(" extensions")]),s._v(" "),t("p",[s._v("在导入语句没带文件后缀时，Webpack 会自动带上后缀后去尝试访问文件是否存在。默认是：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("extensions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.json'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("想让 Webpack 优先使用目录下的 TypeScript 文件，可以这样配置：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("extensions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.ts'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.json'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h3",{attrs:{id:"modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modules"}},[s._v("#")]),s._v(" modules")]),s._v(" "),t("p",[t("code",[s._v("resolve.modules")]),s._v(" 配置 Webpack 去哪些目录下寻找第三方模块，默认是只会去 "),t("code",[s._v("node_modules")]),s._v(" 目录下寻找。")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./src/components'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node_modules'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("可以简单通过 "),t("code",[s._v("import 'button'")]),s._v(" 导入，在 "),t("code",[s._v("/src/components")]),s._v(" 下寻找 "),t("code",[s._v("button")]),s._v("。")]),s._v(" "),t("h2",{attrs:{id:"plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[s._v("#")]),s._v(" Plugins")]),s._v(" "),t("p",[s._v("插件目的在于解决 "),t("a",{attrs:{href:"https://www.webpackjs.com/concepts/loaders",target:"_blank",rel:"noopener noreferrer"}},[s._v("loader"),t("OutboundLink")],1),s._v(" 无法实现的"),t("strong",[s._v("其他事")]),s._v("。针对文件模块转换要做的使用 loader，而其他干涉构建内容的可以使用 plugin。")]),s._v(" "),t("p",[s._v("用法：由于"),t("strong",[s._v("插件")]),s._v("可以携带参数/选项，必须在 webpack 配置中，向 "),t("code",[s._v("plugins")]),s._v(" 属性传入 "),t("code",[s._v("new")]),s._v(" 实例。")]),s._v(" "),t("h2",{attrs:{id:"webpack资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack资料"}},[s._v("#")]),s._v(" webpack资料")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://zhaoda.net/webpack-handbook/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Webpack 中文指南"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.jianshu.com/p/42e11515c10f",target:"_blank",rel:"noopener noreferrer"}},[s._v("webpack0基础入门"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);